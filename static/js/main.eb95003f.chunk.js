(this.webpackJsonpnotes=this.webpackJsonpnotes||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(1),a=n.n(c),s=n(17),i=n.n(s),r=n(11),l=(n(27),n(8)),u=n(6),h=n(2);n(28);var j=function(e){var t=a.a.useState(""),n=Object(u.a)(t,2),c=n[0],s=n[1],i=a.a.useState(""),r=Object(u.a)(i,2),l=r[0],h=r[1],j=a.a.useState(!1),d=Object(u.a)(j,2),m=d[0],b=d[1],p=a.a.useState(!1),f=Object(u.a)(p,2),_=f[0],O=f[1];return Object(o.jsx)("main",{className:"main",children:Object(o.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault(),function(e,t){return fetch("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat("AIzaSyCBQIQgMI_GWopOMbTM3nSmWMmXoy_a1_g"),{method:"POST",body:JSON.stringify({email:e,password:t,returnSecureToken:!0}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.ok?e.json():Promise.reject("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.status))})).then((function(e){return e.idToken}))}(c,l).then((function(e){return localStorage.setItem("token",e),e})).then((function(){e.onAuth(localStorage.getItem("token")),s(""),h(""),b(!0),O(!1)})).catch((function(){O(!0)}))},children:[Object(o.jsx)("h2",{className:"form__title",children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(o.jsx)("h3",{className:"form__error ".concat(_&&"form__error_active"),children:"\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 e-mail \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(o.jsxs)("fieldset",{className:"form__input-container ".concat(m&&"form__input-container_inactive"),children:[Object(o.jsxs)("div",{className:"form__field",children:[Object(o.jsx)("label",{htmlFor:"email",className:"form__label",children:"E-mail"}),Object(o.jsx)("input",{type:"email",className:"form__input",id:"email",placeholder:"example@mail.com",value:c,onChange:function(e){s(e.target.value)},required:!0})]}),Object(o.jsxs)("div",{className:"form__field",children:[Object(o.jsx)("label",{htmlFor:"password",className:"form__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(o.jsx)("input",{type:"password",className:"form__input",id:"password",minLength:"8",maxLength:"25",placeholder:"12345678",value:l,onChange:function(e){h(e.target.value)},required:!0})]}),Object(o.jsx)("button",{type:"submit",className:"form__submit ".concat(m&&"form__submit_inactive"),value:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})]})})};n(29);var d=function(e){return Object(o.jsxs)("header",{className:"header",children:[Object(o.jsx)("h1",{className:"header__title",children:"\u041c\u043e\u0438 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"}),Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{type:"button",className:"header__button ".concat(e.token&&"header__button_active"),onClick:e.onAddNotes,children:"+"}),Object(o.jsx)("button",{type:"button",className:"header__button header__button_type_text ".concat(e.token&&"header__button_active"),value:"\u0412\u044b\u0439\u0442\u0438",onClick:e.onSignOut,children:"\u0412\u044b\u0439\u0442\u0438"})]})]})};n(30);var m=function(e){return Object(o.jsxs)("li",{className:"note",children:[Object(o.jsxs)("div",{className:"note__content",children:[Object(o.jsx)("h2",{className:"note__title",children:e.name}),Object(o.jsx)("p",{className:"note__data",children:"\u0417\u0430\u043c\u0435\u0442\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430: \n          ".concat(new Date(e.data).toLocaleDateString(),"\n          ").concat(new Date(e.data).toLocaleTimeString(),". \u0421 \u043c\u043e\u043c\u0435\u043d\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u043e: ").concat(function(e){var t=(e/1e3).toFixed(),n=Math.floor(t/60),o="";return n>59&&(n-=60*(o=Math.floor(n/60))),t=Math.floor(t%60),""!==o?o+(o<5?" \u0447\u0430\u0441\u0430 ":" \u0447\u0430\u0441\u043e\u0432 ")+n+(n<5?" \u043c\u0438\u043d\u0443\u0442\u044b ":" \u043c\u0438\u043d\u0443\u0442 ")+t+(t<5?" \u0441\u0435\u043a\u0443\u043d\u0434\u044b":" \u0441\u0435\u043a\u0443\u043d\u0434"):n+" \u043c\u0438\u043d\u0443\u0442 "+t+" \u0441\u0435\u043a\u0443\u043d\u0434"}(Date.now()-Date.parse(e.data)))}),Object(o.jsx)("p",{className:"note__description",children:e.description})]}),Object(o.jsx)("button",{className:"note__delete",type:"button",onClick:function(){e.onNoteDelete(e)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})};n(31);var b=function(e){return Object(o.jsx)("ul",{className:"notes main__notes",children:0===e.notes.length?Object(o.jsx)("p",{children:"\u0417\u0430\u043c\u0435\u0442\u043e\u043a \u043d\u0435\u0442"}):e.notes.map((function(t){return Object(c.createElement)(m,Object(l.a)(Object(l.a)({},t),{},{key:t.id,onNoteDelete:e.onNoteDelete,token:e.token}))}))})};n(32);var p=function(e){var t=a.a.useState(""),n=Object(u.a)(t,2),c=n[0],s=n[1],i=a.a.useState(""),r=Object(u.a)(i,2),l=r[0],h=r[1];return Object(o.jsxs)("section",{className:"popup ".concat(e.isOpen&&"popup_opened"),children:[Object(o.jsx)("div",{className:"popup__overlay",onClick:e.onClose}),Object(o.jsxs)("form",{className:"popup__container",name:"notes",onSubmit:function(t){t.preventDefault(),e.onAddNotes({name:c,description:l,data:new Date,token:e.token}),s(""),h("")},children:[Object(o.jsx)("button",{className:"popup__close",type:"button",onClick:e.onClose}),Object(o.jsx)("h2",{className:"popup__title",children:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"}),Object(o.jsxs)("fieldset",{className:"popup__input-container",children:[Object(o.jsx)("div",{className:"popup__field",children:Object(o.jsx)("input",{type:"text",className:"popup__item",name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"40",value:c,onChange:function(e){s(e.target.value)}})}),Object(o.jsx)("div",{className:"popup__field",children:Object(o.jsx)("input",{type:"text",className:"popup__item",name:"description",placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"500",value:l,onChange:function(e){h(e.target.value)}})}),Object(o.jsx)("button",{type:"submit",className:"popup__submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})]})},f=n(18),_=n(19),O=function(e){return e.json()},x=new(function(){function e(t){Object(f.a)(this,e),this._headers=t.headers,this._url=t.url}return Object(_.a)(e,[{key:"getNotes",value:function(e){return fetch("".concat(this._url,"/notes.json?auth=").concat(e),{method:"GET",headers:this._headers}).then(O)}},{key:"createNote",value:function(e){return fetch("".concat(this._url,"/notes.json?auth=").concat(e.token),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,description:e.description,data:e.data})}).then(O)}},{key:"deleteNote",value:function(e){return fetch("".concat(this._url,"/notes/").concat(e.id,".json?auth=").concat(e.token),{method:"DELETE",headers:this._headers}).then(O)}}]),e}())({headers:{"Content-Type":"application/json"},url:"https://my-notes-app-f475f-default-rtdb.firebaseio.com"}),g=n(21),N=function(e){var t=e.component,n=Object(g.a)(e,["component"]);return Object(o.jsx)(h.b,{children:n.token?Object(o.jsx)(t,Object(l.a)({},n)):Object(o.jsx)(h.a,{to:"/notes/login"})})};n(38);var v=function(){var e=a.a.useState(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],s=a.a.useState([]),i=Object(u.a)(s,2),r=i[0],m=i[1],f=a.a.useState(localStorage.getItem("token")||""),_=Object(u.a)(f,2),O=_[0],g=_[1],v=Object(h.g)();function k(){c(!1)}function y(e){var t=Object.keys(e).map((function(t){return Object(l.a)(Object(l.a)({},e[t]),{},{id:t})}));m(t)}return a.a.useEffect((function(){localStorage.getItem("token")&&x.getNotes(O).then((function(e){null!==e?y(e):m([])}))}),[O]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(d,{onAddNotes:function(){c(!0)},token:O,onSignOut:function(){localStorage.removeItem("token"),g(""),v.push("/notes/login")}}),Object(o.jsx)(p,{isOpen:n,onClose:k,onAddNotes:function(e){x.createNote(e).then((function(){x.getNotes(e.token).then((function(e){y(e),k()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},token:O}),Object(o.jsxs)(h.d,{children:[Object(o.jsx)(h.b,{path:"/notes/login",children:Object(o.jsx)(j,{onAuth:function(e){g(e),v.push("/notes")}})}),Object(o.jsx)(N,{path:"/notes",component:b,token:O,notes:r,onNoteDelete:function(e){x.deleteNote(e).then((function(){x.getNotes(e.token).then((function(e){y(e)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}),Object(o.jsx)(h.b,{path:"/notes",children:O?Object(o.jsx)(h.a,{to:"/notes"}):Object(o.jsx)(h.a,{to:"/notes/login"})})]})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),o(e),c(e),a(e),s(e)}))};i.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(r.a,{children:Object(o.jsx)(v,{})})}),document.getElementById("root")),k()}},[[39,1,2]]]);
//# sourceMappingURL=main.eb95003f.chunk.js.map