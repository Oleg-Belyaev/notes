{"version":3,"sources":["components/Autorisation.js","components/Header.js","components/Note.js","components/Notes.js","components/Popup.js","utils/Api.js","components/ProtectedRout.js","components/App.js","reportWebVitals.js","index.js"],"names":["Autorisation","props","React","useState","email","setEmail","password","setPassword","activeButton","setActiveButton","error","setError","className","onSubmit","e","preventDefault","fetch","method","body","JSON","stringify","returnSecureToken","headers","then","res","ok","json","Promise","reject","status","data","idToken","auth","token","localStorage","setItem","onAuth","getItem","catch","htmlFor","type","id","placeholder","value","onChange","target","required","minLength","maxLength","Header","onClick","onAddNotes","onSignOut","Note","name","Date","toLocaleDateString","toLocaleTimeString","ms","second","toFixed","min","Math","floor","hours","convertMs","now","parse","description","onNoteDelete","Notes","notes","length","map","note","key","Popup","setName","setDescription","isOpen","onClose","handleOriginalResponse","api","options","this","_headers","_url","url","noteData","ProtectedRoute","Component","component","to","App","isPopupOpen","setIsPopupOpen","setNotes","setToken","history","useHistory","closePopup","renderNotes","newNotes","Object","keys","useEffect","getNotes","removeItem","push","newNotesData","createNote","err","console","log","path","ProtectedRout","noteDelete","deleteNote","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gVA+EeA,MA5Ef,SAAsBC,GAAQ,IAAD,EAEDC,IAAMC,SAAS,IAFd,mBAEpBC,EAFoB,KAEbC,EAFa,OAGKH,IAAMC,SAAS,IAHpB,mBAGpBG,EAHoB,KAGVC,EAHU,OAIaL,IAAMC,UAAS,GAJ5B,mBAIpBK,EAJoB,KAINC,EAJM,OAKDP,IAAMC,UAAS,GALd,mBAKpBO,EALoB,KAKbC,EALa,KAqD3B,OACE,sBAAMC,UAAU,OAAhB,SACE,uBAAMA,UAAU,OAAOC,SArB3B,SAAsBC,GACpBA,EAAEC,iBApBJ,SAAcX,EAAOE,GAEnB,OAAOU,MAAM,6EAAD,OADG,2CACqF,CAClGC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBhB,QACAE,WACAe,mBAAmB,IAErBC,QAAS,CACP,eAAgB,sBAGnBC,MAAK,SAACC,GACL,OAAOA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAR,0GAAuCJ,EAAIK,YAEzEN,MAAK,SAAAO,GAAI,OAAIA,EAAKC,WAKnBC,CAAK5B,EAAOE,GACXiB,MAAK,SAAAU,GAEJ,OADAC,aAAaC,QAAQ,QAASF,GACvBA,KAERV,MAAK,WACJtB,EAAMmC,OAAOF,aAAaG,QAAQ,UAClChC,EAAS,IACTE,EAAY,IACZE,GAAgB,GAChBE,GAAS,MAEV2B,OAAM,WACL3B,GAAS,OAMT,UACE,oBAAIC,UAAU,cAAd,gFACA,oBAAIA,UAAS,sBAAiBF,GAAS,sBAAvC,8HACA,2BAAUE,UAAS,gCAA2BJ,GAAgB,kCAA9D,UACE,sBAAKI,UAAU,cAAf,UACE,uBAAO2B,QAAQ,QAAQ3B,UAAU,cAAjC,oBACA,uBAAO4B,KAAK,QAAQ5B,UAAU,cAAc6B,GAAG,QAAQC,YAAY,mBACnEC,MAAOvC,EAAOwC,SAvDxB,SAA4B9B,GAC1BT,EAASS,EAAE+B,OAAOF,QAsDiCG,UAAQ,OAErD,sBAAKlC,UAAU,cAAf,UACE,uBAAO2B,QAAQ,WAAW3B,UAAU,cAApC,kDACA,uBAAO4B,KAAK,WAAW5B,UAAU,cAAc6B,GAAG,WAAWM,UAAU,IAAIC,UAAU,KAAKN,YAAY,WACtGC,MAAOrC,EAAUsC,SAxD3B,SAA8B9B,GAC5BP,EAAYO,EAAE+B,OAAOF,QAuDoCG,UAAQ,OAE3D,wBAAQN,KAAK,SAAS5B,UAAS,uBAAkBJ,GAAgB,yBAA2BmC,MAAM,6CAAlG,iE,MCxDKM,MAbf,SAAiBhD,GAEf,OACE,yBAAQW,UAAU,SAAlB,UACE,oBAAIA,UAAU,gBAAd,2EACA,gCACE,wBAAQ4B,KAAK,SAAS5B,UAAS,yBAAoBX,EAAMgC,OAAS,yBAA2BiB,QAASjD,EAAMkD,WAA5G,eACA,wBAAQX,KAAK,SAAS5B,UAAS,kDAA6CX,EAAMgC,OAAS,yBAA2BU,MAAM,iCAAQO,QAASjD,EAAMmD,UAAnJ,mD,MC4BOC,MApCf,SAAcpD,GAqBZ,OACE,qBAAIW,UAAU,OAAd,UACE,sBAAKA,UAAU,gBAAf,UACE,oBAAIA,UAAU,cAAd,SAA6BX,EAAMqD,OACnC,mBAAG1C,UAAU,aAAb,sHAEI,IAAI2C,KAAKtD,EAAM6B,MAAM0B,qBAFzB,uBAGI,IAAID,KAAKtD,EAAM6B,MAAM2B,qBAHzB,sJAnBN,SAAoBC,GAClB,IAAIC,GAAUD,EAAK,KAAME,UACrBC,EAAMC,KAAKC,MAAMJ,EAAS,IAC1BK,EAAQ,GAMZ,OALIH,EAAM,KAERA,GAAqB,IADrBG,EAAQF,KAAKC,MAAMF,EAAM,MAG3BF,EAASG,KAAKC,MAAMJ,EAAS,IACf,KAAVK,EACKA,GAAUA,EAAQ,EAAK,6BAAW,oCAAaH,GAAQA,EAAM,EAAM,yCAAa,oCAAaF,GAAWA,EAAS,EAAM,8CAAa,yCAEtIE,EAAM,mCAAYF,EAAS,wCAU+CM,CAAUV,KAAKW,MAAQX,KAAKY,MAAMlE,EAAM6B,UACrH,mBAAGlB,UAAU,oBAAb,SAAkCX,EAAMmE,iBAEzC,wBAAQxD,UAAU,eAAe4B,KAAK,SAASU,QA7BpD,WACEjD,EAAMoE,aAAapE,IA4BhB,4D,MCjBQqE,MAbf,SAAerE,GACb,OACE,oBAAIW,UAAU,oBAAd,SAC4B,IAAvBX,EAAMsE,MAAMC,OACX,8FACAvE,EAAMsE,MAAME,KAAI,SAACC,GACjB,OAAO,wBAAC,EAAD,2BAAUA,GAAV,IAAgBC,IAAKD,EAAKjC,GAAI4B,aAAcpE,EAAMoE,aAAcpC,MAAOhC,EAAMgC,e,MCwC/E2C,MA9Cf,SAAe3E,GAAQ,IAAD,EACIC,IAAMC,SAAS,IADnB,mBACbmD,EADa,KACPuB,EADO,OAEkB3E,IAAMC,SAAS,IAFjC,mBAEbiE,EAFa,KAEAU,EAFA,KAwBpB,OACE,0BAASlE,UAAS,gBAAWX,EAAM8E,QAAU,gBAA7C,UACA,qBAAKnE,UAAU,iBAAiBsC,QAASjD,EAAM+E,UAC/C,uBAAMpE,UAAU,mBAAmB0C,KAAK,QAAQzC,SAflD,SAAuBC,GACrBA,EAAEC,iBAEFd,EAAMkD,WAAW,CACfG,OACAc,cACAtC,KAAM,IAAIyB,KACVtB,MAAOhC,EAAMgC,QAEf4C,EAAQ,IACRC,EAAe,KAKf,UACE,wBAAQlE,UAAU,eAAe4B,KAAK,SAASU,QAASjD,EAAM+E,UAC9D,oBAAIpE,UAAU,eAAd,qHACA,2BAAUA,UAAU,yBAApB,UACE,qBAAKA,UAAU,eAAf,SACE,uBAAO4B,KAAK,OAAO5B,UAAU,cAAc0C,KAAK,OAAOZ,YAAY,mDAAWI,UAAQ,EACtFC,UAAU,IAAIC,UAAU,KAAKL,MAAOW,EAAMV,SA7BlD,SAA0B9B,GACxB+D,EAAQ/D,EAAE+B,OAAOF,YA8Bb,qBAAK/B,UAAU,eAAf,SACE,uBAAO4B,KAAK,OAAO5B,UAAU,cAAc0C,KAAK,cAAcZ,YAAY,mDAAWI,UAAQ,EAC7FC,UAAU,IAAIC,UAAU,MAAML,MAAOyB,EAAaxB,SA7B1D,SAAiC9B,GAC/BgE,EAAehE,EAAE+B,OAAOF,YA8BpB,wBAAQH,KAAK,SAAS5B,UAAU,gBAAgB+B,MAAM,yDAAtD,8E,gBC1CFsC,EAAyB,SAACzD,GAAD,OAASA,EAAIE,QA6C7BwD,EAPH,I,WAnCV,WAAYC,GAAU,oBACpBC,KAAKC,SAAWF,EAAQ7D,QACxB8D,KAAKE,KAAOH,EAAQI,I,qDAGbtD,GACP,OAAOjB,MAAM,GAAD,OAAIoE,KAAKE,KAAT,4BAAiCrD,GAAS,CACpDhB,OAAQ,MACRK,QAAS8D,KAAKC,WAEf9D,KAAK0D,K,iCAGGO,GACT,OAAOxE,MAAM,GAAD,OAAIoE,KAAKE,KAAT,4BAAiCE,EAASvD,OAAS,CAC7DhB,OAAQ,OACRK,QAAS8D,KAAKC,SACdnE,KAAMC,KAAKC,UAAU,CACnBkC,KAAMkC,EAASlC,KACfc,YAAaoB,EAASpB,YACtBtC,KAAM0D,EAAS1D,SAGlBP,KAAK0D,K,iCAGGO,GACT,OAAOxE,MAAM,GAAD,OAAIoE,KAAKE,KAAT,kBAAuBE,EAAS/C,GAAhC,sBAAgD+C,EAASvD,OAAS,CAC5EhB,OAAQ,SACRK,QAAQ8D,KAAKC,WAEd9D,KAAK0D,O,KAIE,CAAS,CACnB3D,QAAS,CACP,eAAgB,oBAElBiE,IAAK,2D,QC7BQE,EAVQ,SAAC,GAAsC,IAA1BC,EAAyB,EAApCC,UAAyB1F,EAAW,6BAC3D,OACE,cAAC,IAAD,UAEIA,EAAMgC,MAAQ,cAACyD,EAAD,eAAezF,IAAY,cAAC,IAAD,CAAU2F,GAAG,oB,MCiG/CC,MA9Ff,WAAgB,IAAD,EACyB3F,IAAMC,UAAS,GADxC,mBACN2F,EADM,KACOC,EADP,OAEa7F,IAAMC,SAAS,IAF5B,mBAENoE,EAFM,KAECyB,EAFD,OAGa9F,IAAMC,SAAS+B,aAAaG,QAAQ,UAAY,IAH7D,mBAGNJ,EAHM,KAGCgE,EAHD,KAIPC,EAAUC,cAMhB,SAASC,IACPL,GAAe,GAGjB,SAASM,EAAa9B,GACpB,IAAM+B,EAAWC,OAAOC,KAAKjC,GAAOE,KAAI,SAAAE,GAAG,kCAASJ,EAAMI,IAAf,IAAqBlC,GAAIkC,OACpEqB,EAASM,GA6DX,OAdApG,IAAMuG,WAAU,WACHvE,aAAaG,QAAQ,UAE9B6C,EAAIwB,SAASzE,GACZV,MAAK,SAACC,GACO,OAARA,EACF6E,EAAY7E,GAEZwE,EAAS,SAId,CAAC/D,IAGF,sBAAKrB,UAAU,MAAf,UACE,cAAC,EAAD,CAAQuC,WAzEZ,WACE4C,GAAe,IAwE4B9D,MAAOA,EAAOmB,UAtB3D,WACElB,aAAayE,WAAW,SACxBV,EAAS,IACTC,EAAQU,KAAK,mBAoBX,cAAC,EAAD,CAAO7B,OAAQe,EAAad,QAASoB,EAAYjD,WAxDrD,SAA8B0D,GAC5B3B,EAAI4B,WAAWD,GACdtF,MAAK,WACJ2D,EAAIwB,SAASG,EAAa5E,OACzBV,MAAK,SAACC,GACL6E,EAAY7E,GACZ4E,OAED9D,OAAM,SAACyE,GACNC,QAAQC,IAAIF,SAGfzE,OAAM,SAACyE,GACNC,QAAQC,IAAIF,OA2CuE9E,MAAOA,IAC1F,eAAC,IAAD,WACE,cAAC,IAAD,CAAOiF,KAAK,eAAZ,SACE,cAAC,EAAD,CAAc9E,OAhEtB,SAAqBH,GACnBgE,EAAShE,GACTiE,EAAQU,KAAK,eAgET,cAACO,EAAD,CAAgBD,KAAK,SAASvB,UAAWrB,EAAOrC,MAAOA,EAAOsC,MAAOA,EAAOF,aA5ClF,SAA0B+C,GACxBlC,EAAImC,WAAWD,GACd7F,MAAK,WACJ2D,EAAIwB,SAASU,EAAWnF,OACvBV,MAAK,SAACC,GACL6E,EAAY7E,MAEbc,OAAM,SAACyE,GACNC,QAAQC,IAAIF,SAGfzE,OAAM,SAACyE,GACNC,QAAQC,IAAIF,SAiCV,cAAC,IAAD,CAAOG,KAAK,SAAZ,SACGjF,EAAQ,cAAC,IAAD,CAAU2D,GAAG,WAAc,cAAC,IAAD,CAAUA,GAAG,0BCrF5C0B,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBjG,MAAK,YAAkD,IAA/CkG,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.eb95003f.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Autorisation.css';\r\n\r\nfunction Autorisation(props) {\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [activeButton, setActiveButton] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n\r\n  function handleEmailChange (e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function auth(email, password) {\r\n    const apiKey = 'AIzaSyCBQIQgMI_GWopOMbTM3nSmWMmXoy_a1_g';\r\n    return fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        email,\r\n        password,\r\n        returnSecureToken: true\r\n      }),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then((res) => {\r\n      return res.ok ? res.json() : Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n    })\r\n    .then(data => data.idToken)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    auth(email, password)\r\n    .then(token => {\r\n      localStorage.setItem('token', token);\r\n      return token;\r\n    })\r\n    .then(() => {\r\n      props.onAuth(localStorage.getItem('token'));\r\n      setEmail('');\r\n      setPassword('');\r\n      setActiveButton(true);\r\n      setError(false);\r\n    })\r\n    .catch(() => {\r\n      setError(true);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <form className=\"form\" onSubmit={handleSubmit}>\r\n        <h2 className=\"form__title\">Авторизация</h2>\r\n        <h3 className={`form__error ${error && 'form__error_active'}`}>Не верный e-mail или пароль</h3>\r\n        <fieldset className={`form__input-container ${activeButton && 'form__input-container_inactive'}`}>\r\n          <div className=\"form__field\">\r\n            <label htmlFor=\"email\" className=\"form__label\">E-mail</label>\r\n            <input type=\"email\" className=\"form__input\" id=\"email\" placeholder=\"example@mail.com\" \r\n            value={email} onChange={handleEmailChange} required/>\r\n          </div>\r\n          <div className=\"form__field\">\r\n            <label htmlFor=\"password\" className=\"form__label\">Пароль</label>\r\n            <input type=\"password\" className=\"form__input\" id=\"password\" minLength=\"8\" maxLength=\"25\" placeholder=\"12345678\" \r\n            value={password} onChange={handlePasswordChange} required/>\r\n          </div>\r\n          <button type=\"submit\" className={`form__submit ${activeButton && 'form__submit_inactive'}`} value=\"Создать\">Создать</button>\r\n        </fieldset>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Autorisation;","import React from 'react';\r\nimport './Header.css';\r\n\r\nfunction Header (props) {\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <h1 className=\"header__title\">Мои заметки</h1>\r\n      <div>\r\n        <button type=\"button\" className={`header__button ${props.token && 'header__button_active'}`} onClick={props.onAddNotes}>+</button>\r\n        <button type=\"button\" className={`header__button header__button_type_text ${props.token && 'header__button_active'}`} value=\"Выйти\" onClick={props.onSignOut}>Выйти</button>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","import './Note.css';\r\n\r\nfunction Note(props) {\r\n\r\n  function handleDeleteClick () {\r\n    props.onNoteDelete(props);\r\n  }\r\n\r\n  function convertMs (ms) {\r\n    let second = (ms / 1000).toFixed();\r\n    let min = Math.floor(second / 60);\r\n    let hours = '';\r\n    if (min > 59) {\r\n      hours = Math.floor(min / 60);\r\n      min = min - (hours * 60);  \r\n    }\r\n    second = Math.floor(second % 60);\r\n    if (hours !== '') {\r\n      return hours + ((hours < 5) ? ' часа ' : ' часов ') + min + ((min < 5 ) ? ' минуты ' : ' минут ') + second + ((second < 5 ) ? ' секунды' : ' секунд')\r\n    }\r\n    return min + ' минут ' + second + ' секунд'\r\n  }\r\n\r\n  return (\r\n    <li className=\"note\">\r\n      <div className=\"note__content\">\r\n        <h2 className=\"note__title\">{props.name}</h2>\r\n        <p className=\"note__data\">\r\n          {`Заметка создана: \r\n          ${new Date(props.data).toLocaleDateString()}\r\n          ${new Date(props.data).toLocaleTimeString()}. С момента создания прошло: ${convertMs(Date.now() - Date.parse(props.data))}`}</p>\r\n        <p className=\"note__description\">{props.description}</p>\r\n      </div>\r\n       <button className=\"note__delete\" type=\"button\" onClick={handleDeleteClick}>Удалить</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Note;","import Note from './Note';\r\nimport './Notes.css';\r\n\r\nfunction Notes(props) {\r\n  return (\r\n    <ul className=\"notes main__notes\">\r\n      { (props.notes.length === 0) \r\n        ? <p>Заметок нет</p>\r\n        : props.notes.map((note) => {\r\n          return <Note {...note} key={note.id} onNoteDelete={props.onNoteDelete} token={props.token}/>\r\n        })\r\n      }\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Notes;","import React from 'react';\r\nimport './Popup.css';\r\n\r\nfunction Popup(props) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  function handleNameChenge(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit (e) {\r\n    e.preventDefault();\r\n\r\n    props.onAddNotes({\r\n      name,\r\n      description,\r\n      data: new Date(),\r\n      token: props.token\r\n    })\r\n    setName('');\r\n    setDescription('');\r\n  }\r\n  return (\r\n    <section className={`popup ${props.isOpen && 'popup_opened'}`}>\r\n    <div className=\"popup__overlay\" onClick={props.onClose}></div>\r\n    <form className=\"popup__container\" name=\"notes\" onSubmit={handleSubmit}>\r\n      <button className=\"popup__close\" type=\"button\" onClick={props.onClose}></button>\r\n      <h2 className=\"popup__title\">Добавление заметки</h2>\r\n      <fieldset className=\"popup__input-container\">\r\n        <div className=\"popup__field\">\r\n          <input type=\"text\" className=\"popup__item\" name=\"name\" placeholder=\"Название\" required \r\n          minLength=\"2\" maxLength=\"40\" value={name} onChange={handleNameChenge}/>\r\n        </div>\r\n        <div className=\"popup__field\">\r\n          <input type=\"text\" className=\"popup__item\" name=\"description\" placeholder=\"Описание\" required \r\n          minLength=\"2\" maxLength=\"500\" value={description} onChange={handleDescriptionChange}/>\r\n        </div>\r\n        <button type=\"submit\" className=\"popup__submit\" value=\"Сохранить\">Сохранить</button>\r\n      </fieldset>\r\n    </form>\r\n  </section>\r\n  )\r\n}\r\n\r\nexport default Popup;","const handleOriginalResponse = (res) => res.json();\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this._headers = options.headers;\r\n    this._url = options.url;\r\n  }\r\n\r\n  getNotes(token) {\r\n    return fetch(`${this._url}/notes.json?auth=${token}`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(handleOriginalResponse);\r\n  }\r\n\r\n  createNote(noteData) {\r\n    return fetch(`${this._url}/notes.json?auth=${noteData.token}`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: noteData.name,\r\n        description: noteData.description,\r\n        data: noteData.data\r\n      })\r\n    })  \r\n    .then(handleOriginalResponse)\r\n  }\r\n\r\n  deleteNote(noteData) {\r\n    return fetch(`${this._url}/notes/${noteData.id}.json?auth=${noteData.token}`, {\r\n      method: 'DELETE',\r\n      headers:this._headers\r\n    })\r\n    .then(handleOriginalResponse)\r\n  }\r\n}\r\n\r\nconst api = new Api ({\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  url: 'https://my-notes-app-f475f-default-rtdb.firebaseio.com'\r\n});\r\n\r\nexport default api;","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({component: Component, ...props}) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        props.token ? <Component {...props} /> : <Redirect to=\"/notes/login\" />\r\n      }\r\n    </Route>\r\n  )\r\n}\r\n\r\nexport default ProtectedRoute;","import React from 'react';\r\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\r\nimport Autorisation from './Autorisation';\r\nimport Header from './Header';\r\nimport Notes from './Notes';\r\nimport Popup from './Popup';\r\nimport api from '../utils/Api';\r\nimport ProtectedRoute from './ProtectedRout';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  const [isPopupOpen, setIsPopupOpen] = React.useState(false);\r\n  const [notes, setNotes] = React.useState([]);\r\n  const [token, setToken] = React.useState(localStorage.getItem('token') || ''); \r\n  const history = useHistory();\r\n  \r\n  function handleAddNotesClick() {\r\n    setIsPopupOpen(true);\r\n  }\r\n\r\n  function closePopup() {\r\n    setIsPopupOpen(false);\r\n  }\r\n\r\n  function renderNotes (notes) {\r\n    const newNotes = Object.keys(notes).map(key => ({...notes[key], id: key}));\r\n    setNotes(newNotes);\r\n  }\r\n  \r\n  function handleAuth (token) {\r\n    setToken(token);\r\n    history.push('/notes')\r\n  }\r\n\r\n  function handleAddNotesSubmit(newNotesData) {\r\n    api.createNote(newNotesData)\r\n    .then(() => {\r\n      api.getNotes(newNotesData.token)\r\n      .then((res) => {\r\n        renderNotes(res);\r\n        closePopup();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n  function handleNoteDelete(noteDelete) {\r\n    api.deleteNote(noteDelete)\r\n    .then(() => {\r\n      api.getNotes(noteDelete.token)\r\n      .then((res) => {\r\n        renderNotes(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n  function signOut () {\r\n    localStorage.removeItem('token');\r\n    setToken('')\r\n    history.push('/notes/login');\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const id = localStorage.getItem('token');\r\n    if (id) {\r\n      api.getNotes(token)\r\n      .then((res) => {\r\n        if (res !== null) {\r\n          renderNotes(res);\r\n        } else {\r\n          setNotes([]);\r\n        }\r\n      })\r\n    }\r\n  }, [token]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Header onAddNotes={handleAddNotesClick} token={token} onSignOut={signOut}/>\r\n      <Popup isOpen={isPopupOpen} onClose={closePopup} onAddNotes={handleAddNotesSubmit} token={token}/>\r\n      <Switch>\r\n        <Route path=\"/notes/login\">\r\n          <Autorisation onAuth={handleAuth}/>\r\n        </Route>\r\n        <ProtectedRoute path=\"/notes\" component={Notes} token={token} notes={notes} onNoteDelete={handleNoteDelete} />\r\n        <Route path=\"/notes\">\r\n          {token ? <Redirect to=\"/notes\" /> : <Redirect to=\"/notes/login\" />}\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}