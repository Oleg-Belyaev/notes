{"version":3,"sources":["components/Autorisation.js","components/Header.js","components/Note.js","components/Notes.js","components/Popup.js","utils/Api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Autorisation","props","React","useState","email","setEmail","password","setPassword","activeButton","setActiveButton","error","setError","className","onSubmit","e","preventDefault","fetch","method","body","JSON","stringify","returnSecureToken","headers","then","res","ok","json","Promise","reject","status","data","idToken","auth","token","localStorage","setItem","onAuth","getItem","catch","htmlFor","type","id","placeholder","value","onChange","target","required","minLength","maxLength","to","Header","setId","useEffect","onClick","onAddNotes","removeItem","Note","name","Date","toLocaleDateString","toLocaleTimeString","ms","second","toFixed","min","Math","floor","hours","convertMs","now","parse","description","onNoteDelete","Notes","notes","length","map","note","key","Popup","setName","setDescription","isOpen","onClose","handleOriginalResponse","api","options","this","_headers","_url","url","noteData","App","isPopupOpen","setIsPopupOpen","setNotes","setToken","closePopup","renderNotes","newNotes","Object","keys","getNotes","exact","path","noteDelete","deleteNote","err","console","log","newNotesData","createNote","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0f5117cb.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './Autorisation.css';\r\n\r\nfunction Autorisation(props) {\r\n\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n  const [activeButton, setActiveButton] = React.useState(false);\r\n  const [error, setError] = React.useState(false);\r\n\r\n  function handleEmailChange (e) {\r\n    setEmail(e.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(e) {\r\n    setPassword(e.target.value);\r\n  }\r\n\r\n  function auth(email, password) {\r\n    const apiKey = 'AIzaSyCBQIQgMI_GWopOMbTM3nSmWMmXoy_a1_g';\r\n    return fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${apiKey}`, {\r\n      method: 'POST',\r\n      body: JSON.stringify({\r\n        email,\r\n        password,\r\n        returnSecureToken: true\r\n      }),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then((res) => {\r\n      return res.ok ? res.json() : Promise.reject(`Что-то пошло не так: ${res.status}`);\r\n    })\r\n    .then(data => data.idToken)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    auth(email, password)\r\n    .then(token => {\r\n      localStorage.setItem('token', token);\r\n      return token;\r\n    })\r\n    .then(() => {\r\n      props.onAuth(localStorage.getItem('token'));\r\n      setEmail('');\r\n      setPassword('');\r\n      setActiveButton(true);\r\n      setError(false);\r\n    })\r\n    .catch(() => {\r\n      setError(true);\r\n    });\r\n  }\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <form className=\"form\" onSubmit={handleSubmit}>\r\n        <h2 className=\"form__title\">Авторизация</h2>\r\n        <h3 className={`form__error ${error && 'form__error_active'}`}>Не верный e-mail или пароль</h3>\r\n        <fieldset className={`form__input-container ${activeButton && 'form__input-container_inactive'}`}>\r\n          <div className=\"form__field\">\r\n            <label htmlFor=\"email\" className=\"form__label\">E-mail</label>\r\n            <input type=\"email\" className=\"form__input\" id=\"email\" placeholder=\"example@mail.com\" \r\n            value={email} onChange={handleEmailChange} required/>\r\n          </div>\r\n          <div className=\"form__field\">\r\n            <label htmlFor=\"password\" className=\"form__label\">Пароль</label>\r\n            <input type=\"password\" className=\"form__input\" id=\"password\" minLength=\"8\" maxLength=\"25\" placeholder=\"12345678\" \r\n            value={password} onChange={handlePasswordChange} required/>\r\n          </div>\r\n          <button type=\"submit\" className={`form__submit ${activeButton && 'form__submit_inactive'}`} value=\"Создать\">Создать</button>\r\n          <Link type=\"button\" className={`form__button ${!activeButton && 'form__button_inactive'}`} value=\"Войти\" to=\"/notes/mainPage\"> Войти </Link>\r\n        </fieldset>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Autorisation;","import React from 'react';\r\nimport './Header.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Header (props) {\r\n\r\n  const [id, setId] = React.useState('')\r\n\r\n  function handleClick () {\r\n    localStorage.removeItem('token');\r\n    setId('');\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    if(props.token) {\r\n      setId(props.token)\r\n    }\r\n  }, [props.token])\r\n\r\n  return (\r\n    <header className=\"header\">\r\n      <h1 className=\"header__title\">Мои заметки</h1>\r\n      <div>\r\n        <button type=\"button\" className={`header__button ${id && 'header__button_active'}`} onClick={props.onAddNotes}>+</button>\r\n        <Link type=\"button\" className={`header__button header__button_type_text ${id && 'header__button_active'}`} value=\"Войти\" to=\"/notes\" onClick={handleClick}>Выйти</Link>\r\n      </div>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","import './Note.css';\r\n\r\nfunction Note(props) {\r\n\r\n  function handleDeleteClick () {\r\n    props.onNoteDelete(props);\r\n  }\r\n\r\n  function convertMs (ms) {\r\n    let second = (ms / 1000).toFixed();\r\n    let min = Math.floor(second / 60);\r\n    let hours = '';\r\n    if (min > 59) {\r\n      hours = Math.floor(min / 60);\r\n      min = min - (hours * 60);  \r\n    }\r\n    second = Math.floor(second % 60);\r\n    if (hours !== '') {\r\n      return hours + ((hours < 5) ? ' часа ' : ' часов ') + min + ((min < 5 ) ? ' минуты ' : ' минут ') + second + ((second < 5 ) ? ' секунды' : ' секунд')\r\n    }\r\n    return min + ' минут ' + second + ' секунд'\r\n  }\r\n\r\n  return (\r\n    <li className=\"note\">\r\n      <div className=\"note__content\">\r\n        <h2 className=\"note__title\">{props.name}</h2>\r\n        <p className=\"note__data\">\r\n          {`Заметка создана: \r\n          ${new Date(props.data).toLocaleDateString()}\r\n          ${new Date(props.data).toLocaleTimeString()}. С момента создания прошло: ${convertMs(Date.now() - Date.parse(props.data))}`}</p>\r\n        <p className=\"note__description\">{props.description}</p>\r\n      </div>\r\n       <button className=\"note__delete\" type=\"button\" onClick={handleDeleteClick}>Удалить</button>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default Note;","import Note from './Note';\r\nimport './Notes.css';\r\n\r\nfunction Notes(props) {\r\n  return (\r\n    <ul className=\"notes main__notes\">\r\n      { (props.notes.length === 0) \r\n        ? <p>Заметок нет</p>\r\n        : props.notes.map((note) => {\r\n          return <Note {...note} key={note.id} onNoteDelete={props.onNoteDelete} token={props.token}/>\r\n        })\r\n      }\r\n    </ul>\r\n  )\r\n}\r\n\r\nexport default Notes;","import React from 'react';\r\nimport './Popup.css';\r\n\r\nfunction Popup(props) {\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  function handleNameChenge(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit (e) {\r\n    e.preventDefault();\r\n\r\n    props.onAddNotes({\r\n      name,\r\n      description,\r\n      data: new Date(),\r\n      token: props.token\r\n    })\r\n    setName('');\r\n    setDescription('');\r\n  }\r\n  return (\r\n    <section className={`popup ${props.isOpen && 'popup_opened'}`}>\r\n    <div className=\"popup__overlay\" onClick={props.onClose}></div>\r\n    <form className=\"popup__container\" name=\"notes\" onSubmit={handleSubmit}>\r\n      <button className=\"popup__close\" type=\"button\" onClick={props.onClose}></button>\r\n      <h2 className=\"popup__title\">Добавление заметки</h2>\r\n      <fieldset className=\"popup__input-container\">\r\n        <div className=\"popup__field\">\r\n          <input type=\"text\" className=\"popup__item\" name=\"name\" placeholder=\"Название\" required \r\n          minLength=\"2\" maxLength=\"40\" value={name} onChange={handleNameChenge}/>\r\n        </div>\r\n        <div className=\"popup__field\">\r\n          <input type=\"text\" className=\"popup__item\" name=\"description\" placeholder=\"Описание\" required \r\n          minLength=\"2\" maxLength=\"500\" value={description} onChange={handleDescriptionChange}/>\r\n        </div>\r\n        <button type=\"submit\" className=\"popup__submit\" value=\"Сохранить\">Сохранить</button>\r\n      </fieldset>\r\n    </form>\r\n  </section>\r\n  )\r\n}\r\n\r\nexport default Popup;","const handleOriginalResponse = (res) => res.json();\r\n\r\nclass Api {\r\n  constructor(options) {\r\n    this._headers = options.headers;\r\n    this._url = options.url;\r\n  }\r\n\r\n  getNotes(token) {\r\n    return fetch(`${this._url}/notes.json?auth=${token}`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    })\r\n    .then(handleOriginalResponse);\r\n  }\r\n\r\n  createNote(noteData) {\r\n    return fetch(`${this._url}/notes.json?auth=${noteData.token}`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: noteData.name,\r\n        description: noteData.description,\r\n        data: noteData.data\r\n      })\r\n    })  \r\n    .then(handleOriginalResponse)\r\n  }\r\n\r\n  deleteNote(noteData) {\r\n    return fetch(`${this._url}/notes/${noteData.id}.json?auth=${noteData.token}`, {\r\n      method: 'DELETE',\r\n      headers:this._headers\r\n    })\r\n    .then(handleOriginalResponse)\r\n  }\r\n}\r\n\r\nconst api = new Api ({\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  },\r\n  url: 'https://my-notes-app-f475f-default-rtdb.firebaseio.com'\r\n});\r\n\r\nexport default api;","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Autorisation from './Autorisation';\r\nimport Header from './Header';\r\nimport Notes from './Notes';\r\nimport Popup from './Popup';\r\nimport api from '../utils/Api';\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  const [isPopupOpen, setIsPopupOpen] = React.useState(false);\r\n  const [notes, setNotes] = React.useState([]);\r\n  const [token, setToken] = React.useState(localStorage.getItem('token') || ''); \r\n  \r\n  function handleAddNotesClick() {\r\n    setIsPopupOpen(true);\r\n  }\r\n\r\n  function closePopup() {\r\n    setIsPopupOpen(false);\r\n  }\r\n\r\n  function renderNotes (notes) {\r\n    const newNotes = Object.keys(notes).map(key => ({...notes[key], id: key}));\r\n    setNotes(newNotes);\r\n  }\r\n  \r\n  function handleAuth (token) {\r\n    setToken(token);\r\n  }\r\n\r\n  function handleAddNotesSubmit(newNotesData) {\r\n    api.createNote(newNotesData)\r\n    .then(() => {\r\n      api.getNotes(newNotesData.token)\r\n      .then((res) => {\r\n        renderNotes(res);\r\n        closePopup();\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n  function handleNoteDelete(noteDelete) {\r\n    api.deleteNote(noteDelete)\r\n    .then(() => {\r\n      api.getNotes(noteDelete.token)\r\n      .then((res) => {\r\n        renderNotes(res);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    const id = localStorage.getItem('token');\r\n    if (id) {\r\n      api.getNotes(token)\r\n      .then((res) => {\r\n        if (res !== null) {\r\n          renderNotes(res);\r\n        } else {\r\n          setNotes([]);\r\n        }\r\n      })\r\n    }\r\n  }, [token]);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Header onAddNotes={handleAddNotesClick} token={token}/>\r\n      <Switch>\r\n        <Route exact path=\"/notes\">\r\n          <Autorisation onAuth={handleAuth}/>\r\n        </Route>\r\n        <Route exact path=\"/notes/mainPage\">\r\n          <Notes notes={notes} onNoteDelete={handleNoteDelete} token={token}/>\r\n          <Popup isOpen={isPopupOpen} onClose={closePopup} onAddNotes={handleAddNotesSubmit} token={token}/>\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}